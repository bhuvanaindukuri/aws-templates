### S3
- Defined at region level
- Key will be full path (prefix + object name)
- More than 5GB should be uploaded as Multi-part upload
- Max object size is 5TB
- Metadata - List of key value pairs
- Tags 
  - Max 10
  - useful for security / lifecycle
- Version Id - If versioning enabled
- Folders can be created


#### S3 Security
- User based
    - IAM policies
- Resource based
    - Bucket policies - Most frequently used
    - Object ACLs
    - Bucket ACLs

Note: Final access = IAM policy allow **or** resource policy allows **and** no explicit deny

- Encryption can be done using security keys

#### S3 websites
- URL looks like <bucket-name>.s3-website-<AWS Region>.amazonaws.com or <bucket-name>.s3-website.<AWS Region>.amazonaws.com

#### S3 Versioning
- Enabled at bucket level
- Any file not versioned will have version null
- Suspending versions does not delete previous versions
- Version id is like hashkey
- Version delete is permanent
- If version is not available, it is only marked for deletion. A new version is created with status as Marked for deletion

#### S3 replication
- Asynchronous
- Must enable versioning
- Buckets can be in different accounts
- Can be applied to all objects or specify filter rules
- Objects added before enabling replication are not included. "S3 batch Replcation" can be used for replicating existing objects.
- Types
    - Cross Region Replication (CRR)
    - Same Region Replication (SRR)
- No chaining of replication
- Version ids remain the same for the replicated objects in the target
- Delete marker deletion can be replicated by enabling 
  
#### S3 Storage classes
- Amazon S3 Standard - General purpose
    - Low latency
    - High throughput
- Amazon S3 Standard - IA
    - Slightly lower availability (99.9%)
    - Rapid access when needed
    - Cheaper than S3 standard
- Amazon S3 One Zone - IA
    - Slightly lower availability (99.5%)
    - One AZ only
    - Rapid access when needed
- Amazon S3 Glacier Instant retrieval
    - Millisecond retrieval
    - Min storage duration 90 days
- Amazon S3 Glacier Flexible retrieval
    - Expedited (1 to 5 mins)
    - Standard (3 to 5 hours)
    - Bulk ( 5 to 12 hours)
    - Min storage duration 90 days
- Amazon S3 Glacier Deep Archive
    - Standard 12 hours
    - Bulk 48 hours
    - Minimum storage duration of 180 days
- Amazon S3 Intelligent Tiering
    - Automatic moves between tiers based on number of days of access
    - Monthly monitoring fee & auto-tiering fee

Notes
- Storage classes set at object level or by lifecycle rules at bucket level
